<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Persons Data</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js" integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js" integrity="sha384-ODmDIVzN+pFdexxHEHFBQH3/9/vQ9uori45z4JjnFsRydbmQbmL5t1tQ0culUzyK" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/2c36e9b7b1.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css">
    <style>
        .label{
            display: block;
            width: 80px;
        }
    </style>
    <link rel="shorcut icon" href="https://cdn-icons.flaticon.com/png/512/694/premium/694642.png?token=exp=1659897115~hmac=cef526595b49020242fb3595df829cab">
</head>
<body>
    <nav class="navbar navbar-dark bg-success">
        <div class="container-fluid">
            <a class="navbar-brand">Persons Data Base</a>
        </div>
    </nav>
    <div class="container py-4">
        {% block body %}
        {% endblock %}
    </div>
<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
<script>
    (function(){
        const btnDelete = document.querySelectorAll('.btnDelete');
        btnDelete.forEach(btn => {
            btn.addEventListener('click', (e) => {
                const confirmation = confirm('Are you sure you want to delete this person?');
                if (!confirmation) {
                    e.preventDefault();
                }
            });
        });
    })();

    $(document).ready(function() {
        setTimeout(function() {
            $("#myAlert").fadeOut(1500);
        },3000);
    })

    $(document).ready(function () {
        $('#tablax').DataTable({
            language: {
                paginate: {
                    first: "First",
                    previous: "Previous",
                    next: "Next",
                    last: "Last"
                }
            },
            scrollY: 400,
            lengthMenu: [ [15, 25, -1], [15, 25, "All"] ],
        });
    });
    
    const formatterPeso = new Intl.NumberFormat('es-CO', {
        style: 'currency',
        currency: 'COP',
        minimumFractionDigits: 0
    })

    function formatField() {
        var field = document.getElementById('balance')
        var valueField = field.value
        valueField = valueField.replace('$', '')
        // valueField = valueField.replace('.', '')
        // valueField = valueField.replace(',', '')
        field.value = (formatterPeso.format(valueField) == '$Â 0') ? '' : formatterPeso.format(valueField);
    }

    var balanceField = document.getElementById('balance');
    if (balanceField != null) {
        balanceField.addEventListener("change",formatField);
    }

    function formatId(){
        var fieldId = document.getElementById('idPerson')
        var elements = fieldId.textContent.split('(')
        elements[1] = elements[1].replace(')', '')
        fieldId.textContent = elements[1];
    }
    formatId();
</script>
</body>
<footer>
    <div class="container">
        <div class="col">
            <p class="lead text-center">
                <span>
                    Desarrollado por:
                <a href="mailto:sebastian.sanchez02@uptc.edu.co" target="_blank">Sebastian Felipe Sanchez Hurtado</a>
                y
                <a href="mailto:alejandro.medina@uptc.edu.co" target="_blank">Edgar Alejandro Medina Roa</a>
            </span>
            </p>
        </div>
    </div>
</footer>
</html>